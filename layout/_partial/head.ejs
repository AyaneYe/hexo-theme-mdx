<head>
	<meta charset="UTF-8">
	<% 
		let description = config.description;
		if(strip_html(page.excerpt)!==''){
			description = strip_html(page.excerpt);
		} else if(truncate(strip_html(page.content), {length: 70})!=='') {
			description = truncate(strip_html(page.content), {length: 70});
		} else if(is_category()) {
			description = __('categories') + ' - ' + page.category + ' - '+ config.title;
		} else if(is_tag()) {
			description = __('tags') + ' - ' + page.tag + ' - '+ config.title;
		} else if(is_archive()) {
			description = __('archives');
			if (is_month()) {
				description += ' - ' + page.year+__('archive.year') + page.month+  __('archive.month');
			} else if (is_year()) {
				description += ' - ' + page.year+  __('archive.year');
			}
			description += ' - ' + config.title;
		}
	%>
	<meta name="description" content="<%= description %>">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<% if (theme.favicon) { %>
		<link rel="preload" href="<%- theme.favicon %> " as="image" crossorigin="anonymous">
		<link rel="prefetch" href="<%- theme.favicon %> " as="image" crossorigin="anonymous">
	<% } %>
	<link rel="shortcut icon" href="<%= theme.favicon %>" type="image/x-icon">
	<link rel="apple-touch-icon" href="<%= theme.favicon %>">
	<%- js({ src: 'js/material.js', async: true }) %>
	<%- css(['css/main.css']) %>
	<%# MDUI %>
	<% if (theme.use_cdn) { %>
		<link rel="preconnect" href="https://cdn.jsdelivr.net/" crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@1.0.2/dist/css/mdui.min.css" integrity="sha256-HC/aPArtOc7yw62YcBzG24sJXjXJu0atujZh9a4LtUw=" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/mdui@1.0.2/dist/js/mdui.min.js" integrity="sha256-pQMhrt4i+xYuZzfKboXTE2lnXDccZ8qI2Fh8gyGtX6Q=" crossorigin="anonymous"></script>
		<link rel="preload" href="https://cdn.jsdelivr.net/npm/mdui@1.0.2/dist/fonts/roboto/Roboto-Regular.woff2" as="font" crossorigin="anonymous">
		<link rel="preload" href="https://cdn.jsdelivr.net/npm/mdui@1.0.2/dist/fonts/roboto/Roboto-Medium.woff2" as="font" crossorigin="anonymous">
		<link rel="preload" href="https://cdn.jsdelivr.net/npm/mdui@1.0.2/dist/fonts/roboto/Roboto-Bold.woff2" as="font" crossorigin="anonymous">
		<link rel="preload" href="https://cdn.jsdelivr.net/npm/mdui@1.0.2/dist/icons/material-icons/MaterialIcons-Regular.woff2" as="font" crossorigin="anonymous">
		<link rel="prefetch" href="https://cdn.jsdelivr.net/npm/mdui@1.0.2/dist/fonts/roboto/Roboto-Regular.woff2" as="font" crossorigin="anonymous">
		<link rel="prefetch" href="https://cdn.jsdelivr.net/npm/mdui@1.0.2/dist/fonts/roboto/Roboto-Medium.woff2" as="font" crossorigin="anonymous">
		<link rel="prefetch" href="https://cdn.jsdelivr.net/npm/mdui@1.0.2/dist/fonts/roboto/Roboto-Bold.woff2" as="font" crossorigin="anonymous">
		<link rel="prefetch" href="https://cdn.jsdelivr.net/npm/mdui@1.0.2/dist/icons/material-icons/MaterialIcons-Regular.woff2" as="font" crossorigin="anonymous">
	<% } else { %>
		<%- js({src: 'mdui/js/mdui.min.js?v=1.0.2', async: true}) %> 
		<%- css(['mdui/css/mdui.min.css?v=1.0.2']) %>
		<link rel="preload" href="mdui/fonts/roboto/Roboto-Regular.woff2" as="font" crossorigin="anonymous">
		<link rel="preload" href="mdui/fonts/roboto/Roboto-Medium.woff2" as="font" crossorigin="anonymous">
		<link rel="preload" href="mdui/fonts/roboto/Roboto-Bold.woff2" as="font" crossorigin="anonymous">
		<link rel="preload" href="mdui/icons/material-icons/MaterialIcons-Regular.woff2" as="font" crossorigin="anonymous">
		<link rel="prefetch" href="mdui/fonts/roboto/Roboto-Regular.woff2" as="font" crossorigin="anonymous">
		<link rel="prefetch" href="mdui/fonts/roboto/Roboto-Medium.woff2" as="font" crossorigin="anonymous">
		<link rel="prefetch" href="mdui/fonts/roboto/Roboto-Bold.woff2" as="font" crossorigin="anonymous">
		<link rel="prefetch" href="mdui/icons/material-icons/MaterialIcons-Regular.woff2" as="font" crossorigin="anonymous">
	<% } %>
	<%- partial('_partial/_plugins/analytics/analytics') %> 
	<title>
		<% let title = page.title || config.title%>
		<% 
		if(is_category()) {
			title = __('categories') + ' - ' + page.category + ' - '+ config.title;
		} else if(is_tag()) {
			title = __('tags') + ' - ' + page.tag + ' - '+ config.title;
		} else if(is_archive()) {
			title = __('archives');
			if (is_month()) {
				title += ' - ' + page.year+__('archive.year') + page.month+  __('archive.month');
			} else if (is_year()) {
				title += ' - ' + page.year+  __('archive.year');
			}
			title += ' - ' + config.title;
		}
		%> 
		<%= title %>
	</title>
	<link rel="preload" href="/search.json" as="fetch" crossorigin="anonymous">
	<link rel="prefetch" href="/search.json" as="fetch" crossorigin="anonymous">
	<% if (theme.header_picture_link) { %>
		<link rel="preload" href="<%- theme.header_picture_link %> " as="image" crossorigin="anonymous">
		<link rel="prefetch" href="<%- theme.header_picture_link %> " as="image" crossorigin="anonymous">
	<% } %>
	<% if (theme.drawer_about) { %>
		<% if (theme.drawer_about.avatar) { %>
			<link rel="prefetch" href="<%- theme.drawer_about.avatar %> " as="image" crossorigin="anonymous">
		<% } %>
		<% if (theme.drawer_about.background) { %>
			<link rel="prefetch" href="<%- theme.drawer_about.background %> " as="image" crossorigin="anonymous">
		<% } %>
	<% } %>
</head>